{
  "project": {
    "name": "Ansible Cloudy",
    "description": "Infrastructure as Code for cloud server management with intelligent automation",
    "type": "infrastructure-automation",
    "languages": ["python", "yaml", "bash"],
    "cli_command": "cli",
    "python_module": "dev.cli.main"
  },
  
  "context": {
    "architecture": {
      "cli": "dev/cli - Python CLI with modular operations",
      "playbooks": "cloudy/playbooks - Ansible recipes organized by category",
      "inventory": "cloudy/inventory - Environment-specific configurations",
      "tasks": "cloudy/tasks - Reusable Ansible task modules"
    },
    "key_flows": {
      "deployment": "harden â†’ security â†’ base â†’ services",
      "connection_groups": "harden_targets (password) â†’ security_targets (SSH keys) â†’ service_targets (SSH keys)",
      "ports": "Initial: 22, Final: 2222 (vault-driven)"
    },
    "vault_variables": {
      "location": ".vault/*.yml",
      "key_vars": ["vault_root_user", "vault_root_password", "vault_ssh_port_initial", "vault_ssh_port_final", "vault_grunt_user"]
    },
    "recent_changes": {
      "ssh_hardening": "Implemented atomic SSH hardening as separate first step",
      "variable_naming": "Migrated to new vault variable names (vault_root_*, vault_grunt_*, vault_ssh_port_*)",
      "scripts_organization": "All scripts now in scripts/ directory (test/, verify/, examples/)"
    }
  },
  
  "important_paths": {
    "scripts": "./scripts/ - Testing, verification, and example scripts",
    "tests": "./test/e2e/ - End-to-end Docker tests",
    "docs": "./docs/ - Project documentation",
    "vault": ".vault/*.yml - Sensitive configuration (git-ignored)"
  },
  
  "common_commands": {
    "setup": "./bootstrap.sh && source .venv/bin/activate",
    "harden": "cli harden --install",
    "security": "cli security --install",
    "base": "cli base --install",
    "test_syntax": "./scripts/test/test-simple.sh",
    "test_full": "./scripts/test/run-complete-test.sh",
    "verify": "./scripts/verify/verify-variable-mapping.sh",
    "check_server": "./scripts/examples/check-server-status.sh <ip>"
  },
  
  "permissions": {
    "allow": [
      "// Project CLI and Python",
      "Bash(cli:*)",
      "Bash(python:*)",
      "Bash(python3:*)",
      "Bash(python -m dev.cli.main:*)",
      
      "// Infrastructure tools",
      "Bash(ansible:*)",
      "Bash(ansible-playbook:*)",
      "Bash(ansible-inventory:*)",
      "Bash(ansible-lint:*)",
      "Bash(docker:*)",
      "Bash(docker-compose:*)",
      
      "// Development tools",
      "Bash(git:*)",
      "Bash(pip install:*)",
      "Bash(flake8:*)",
      "Bash(black:*)",
      "Bash(act:*)",
      "Bash(npm --version)",
      
      "// File operations",
      "Bash(ls:*)",
      "Bash(find:*)",
      "Bash(grep:*)",
      "Bash(rg:*)",
      "Bash(cat:*)",
      "Bash(touch:*)",
      "Bash(mkdir:*)",
      "Bash(mv:*)",
      "Bash(cp:*)",
      "Bash(rm:*)",
      "Bash(chmod:*)",
      "Bash(tree:*)",
      
      "// Text processing",
      "Bash(sed:*)",
      "Bash(awk:*)",
      "Bash(echo:*)",
      
      "// Network and system",
      "Bash(ping:*)",
      "Bash(ssh:*)",
      "Bash(sshpass:*)",
      "Bash(timeout:*)",
      
      "// Scripts and utilities",
      "Bash(./bootstrap.sh:*)",
      "Bash(./scripts/*)",
      "Bash(source:*)",
      "Bash(bash -n:*)",
      "Bash(true)",
      
      "// Environment variables",
      "Bash(export ANSIBLE_VAULT_PASSWORD_FILE=.vault_pass)",
      "Bash(ANSIBLE_VAULT_PASSWORD_FILE=.vault_pass git push)",
      "Bash(unset ANSIBLE_VAULT_PASSWORD_FILE)",
      
      "// Claude Code tools",
      "Write",
      "Edit",
      
      "// Web resources",
      "WebFetch(domain:raw.githubusercontent.com)"
    ],
    "deny": []
  },
  
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [{
          "type": "command",
          "command": "echo 'ðŸ“‹ LEVER Check: Can you extend existing code instead? Review principles.md'"
        }]
      },
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/dev/pre.py"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/dev/post.py"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/dev/notify.py --notify"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/dev/stop.py --chat"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": ".claude/hooks/dev/agent.py"
          }
        ]
      }
    ]
  }
}